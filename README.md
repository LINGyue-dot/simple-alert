# Simple-Alert

## ä»‹ç»

ä¸€ä¸ªç®€å•çš„æŠ¥è­¦ç³»ç»Ÿ





## æ€»çš„ç›®æ ‡

1. å‰ç«¯èƒ½é€šè¿‡ä»¥ç‹¬ç«‹çš„ SDK å½¢å¼æ¥è¿›è¡Œå¼•å…¥æŠ¥è­¦åŠŸèƒ½
2. èƒ½ç›‘å¬å‰ç«¯å¸¸è§çš„é”™è¯¯
   1. JS è¯­æ³•é”™è¯¯
   2. Promise é”™è¯¯
   3. é™æ€èµ„æºé”™è¯¯
   4. æ¥å£è¯·æ±‚é”™è¯¯
3. èƒ½æœ‰æ•°æ®åº“æ”¯æŒå­˜å‚¨è®°å½•è¿™äº›é”™è¯¯
4. ä¸€ä¸ªç®€å•çš„å¹³å°è¿›è¡Œæ˜¾ç¤ºé”™è¯¯

## é”™è¯¯ç±»å‹ä»¥åŠé”™è¯¯æ•è·æ‰‹æ®µ

å‰ç«¯é”™è¯¯å¤§è‡´å¯ä»¥å½’ç±»ä¸º

1. JS è¯­æ³•é”™è¯¯ã€‚
2. Promise é”™è¯¯ã€‚reject äº†æ²¡æœ‰ catch
3. é™æ€èµ„æºåŠ è½½é”™è¯¯ã€‚å›¾ç‰‡ç­‰èµ„æºåŠ è½½å¤±è´¥
4. æ¥å£è¯·æ±‚é”™è¯¯ã€‚åŒ…æ‹¬é http status 200 çš„æ‰€æœ‰å“åº” ==> æ¯ä¸ªé¡¹ç›®çš„æ¥å£è¯·æ±‚æˆåŠŸçŠ¶æ€ä¸åŒï¼Œæš´éœ²ä¸€ä¸ªéªŒè¯è¯·æ±‚æˆåŠŸä¸å¦çš„å‚æ•°ã€‚

å¯¹åº”çš„é”™è¯¯æ•è·æ‰‹æ®µï¼š

1. window.onerror / window.addEventListener('error')
2. window.addEventListener('unhandledrejection')
3. window.addEventListener('error')
4. é‡å†™ XML å¯¹è±¡ä»¥åŠ fetch å¯¹è±¡

æ‰€ä»¥é‡‡ç”¨ addEvenetListener('error') æ¥ä¸€å¹¶ç›‘å¬ JS è¯­æ³•é”™è¯¯ä»¥åŠé™æ€èµ„æºé”™è¯¯





## æŠ¥è­¦æœåŠ¡åŸºæœ¬é€»è¾‘

ä¸€èˆ¬çš„æŠ¥è­¦æœåŠ¡åŸºæœ¬é€»è¾‘å°±å¦‚ä¸‹ï¼š

1. å‰ç«¯æ•è·é”™è¯¯å‘é€ç»™æœåŠ¡ç«¯
2. æœåŠ¡ç«¯å°†å…¶å­˜å‚¨ã€å¹¿æ’­é€šçŸ¥å¹¶å°†æ•°æ®è¿”å›ç»™æŠ¥è­¦å±•ç¤ºå¹³å°
3. æŠ¥è­¦å±•ç¤ºå¹³å°åˆ†æé”™è¯¯å°†å…¶æ ‡æ³¨å‡ºæ¥

é™¤æ­¤ä¹‹å¤–ï¼ŒæŠ¥è­¦æœåŠ¡ä¸€ä¸ªæ ¸å¿ƒçš„åŠŸèƒ½å°±æ˜¯è¿½è¸ªæŠ¥é”™çš„æºç ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬ä¸€èˆ¬ `devtool : false` æ¥å…³é—­ source-map çš„ç”Ÿæˆï¼Œæ‰€ä»¥çº¿ä¸Šçš„æŠ¥é”™å¾€å¾€æ˜¯å…³äºæ‰“åŒ…åæ–‡ä»¶çš„ä¿¡æ¯ä»¥åŠä½ç½®ã€‚æ‰€ä»¥å¹³å°å¿…é¡»è¦æŒæœ‰é¡¹ç›®å¯¹åº”çš„ source-map ã€‚

### source-map çš„ä¸Šä¼ æ–¹å¼

ç›®å‰æŠ¥è­¦å¹³å°å¤§å¤šä¸¤ç§æ–¹å¼ä¸Šä¼  source-map 

1. webpack plugin å½¢å¼ï¼Œ`devtool` è®¾ç½®é false ï¼Œåœ¨ build æ—¶å€™å°†å…¶ source-map ä¸Šä¼ 
2. æ‰‹åŠ¨ä¸Šä¼ 

ç”±äºé¡¹ç›®ä¸€èˆ¬æœ‰ç‰ˆæœ¬ç®¡ç†ï¼Œæ‰€ä»¥ webpack plugin å½¢å¼æ›´ä¸ºæ–¹ä¾¿

> `devtool` é false æƒ…å†µä¸‹ï¼Œbuild è¿‡ç¨‹ä¸­è¿˜æ˜¯ä¼šç”Ÿæˆ source-map ï¼Œè™½ç„¶å®˜ç½‘ä¸Šè¯´æ˜ `devtool : hidden-source-map` ç­‰è®¾ç½®å¯ä»¥ä¸è¢«æµè§ˆå™¨è¯†åˆ«ï¼Œä½†è¿˜æœªçŸ¥æ˜¯å¦æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥æ‰¾åˆ° source-map ï¼Œå¯èƒ½å­˜åœ¨ä¸€å®šå®‰å…¨é—®é¢˜ã€‚

## ç®€å•è®¾è®¡

ä¸€ä¸ªç®€å•çš„æŠ¥è­¦æœåŠ¡å¤§è‡´å°±å¦‚ä¸‹

![image-20230531155917113](https://typora-1300781048.cos.ap-beijing.myqcloud.com/img/202305311559370.png)



## å®ç°

é¡¹ç›®ï¼šhttps://ghe.tusimple.io/shunze-chen/alert-demo/blob/master/src/ErrorComponent/index.tsx

SDKï¼šhttps://ghe.tusimple.io/shunze-chen/alert-demo/tree/master/src/AlertSDK/core

å±•ç¤ºå¹³å°ï¼šhttps://ghe.tusimple.io/shunze-chen/alert-demo/tree/master/src/AlertTable

Nodejs ï¼š https://ghe.tusimple.io/shunze-chen/alert-node

ç›®å‰å·²å®ç°é™¤äº†ç½‘ç»œè¯·æ±‚ä¹‹å¤–çš„æ‰€æœ‰é”™è¯¯æ•è·ï¼Œé‚®ä»¶é€šçŸ¥ã€æœºå™¨äººé€šçŸ¥è¿˜æ²¡æœ‰å®ç°

> æœåŠ¡å™¨åäº†ï¼Œæ‰“åŒ…è€æ˜¯å¡æ­»ï¼Œåªèƒ½å½•å±çœ‹çœ‹äº†ğŸ˜­







## TODO

1. æ”¹é€ æˆ mornrepo ==> ok ï¼Œæ”¹è¿›ä¸€ä¸‹
2. README 
3. mysql æ•°æ®åº“ç­‰ç§å¯†ä¿¡æ¯è¯¥æ€ä¹ˆé¿å… push
4. æŠ½æˆ SDK æ‰“åŒ…å†…å®¹
5. éƒ¨ç½²ä¸Šå»

## å‚è€ƒ

[ã€ç¬¬2932æœŸã€‘åŸºäºSentryé«˜æ•ˆæ²»ç†å‰ç«¯å¼‚å¸¸](https://mp.weixin.qq.com/s/9w62gQxhIQO_mWBhs8RHVQ)

[å­—èŠ‚å‰ç«¯ç›‘æ§å®è·µ - æ˜é‡‘](https://juejin.cn/post/7195496297150709821#heading-0)

[blog/ä»0åˆ°1æ­å»ºå‰ç«¯ç›‘æ§å¹³å°ï¼Œé¢è¯•å¿…å¤‡çš„äº®ç‚¹é¡¹ç›®.md at main Â· xy-sea/blog](https://github.com/xy-sea/blog/blob/main/markdown/ä»0åˆ°1æ­å»ºå‰ç«¯ç›‘æ§å¹³å°ï¼Œé¢è¯•å¿…å¤‡çš„äº®ç‚¹é¡¹ç›®.md)

[SourceMap ä¸Šä¼ ä¸åè§£--åº”ç”¨æ€§èƒ½ç›‘æ§å…¨é“¾è·¯ç‰ˆ-ç«å±±å¼•æ“](https://www.volcengine.com/docs/6431/104839#éªŒè¯sourcemapåˆæ³•æ€§)

[å‰ç«¯æç›‘æ§|çƒ›è±¡ - å¦‚ä½•è®¾è®¡å‰ç«¯å®æ—¶åˆ†æåŠæŠ¥è­¦ç³»ç»Ÿ](https://zhuanlan.zhihu.com/p/159115081) [Sourcemapä¸Šä¼  - è§‚æµ‹äº‘æ–‡æ¡£](https://docs.guance.com/real-user-monitoring/sourcemap/)